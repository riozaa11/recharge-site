
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="PUBG UC, Roblox Robux –±–æ–ª–æ–Ω –±—É—Å–∞–¥ —Ç–æ–≥–ª–æ–æ–º—ã–Ω recharge ‚Äî —Ö—É—Ä–¥–∞–Ω, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π." />
  <title>Game Recharge ‚Äî PUBG UC / Roblox Robux</title>

  <style>
    :root{
      --bg:#0b1020;
      --card:rgba(18,26,51,.72);
      --card2:rgba(15,23,48,.55);
      --text:#e8ecff;
      --muted:#a8b0d9;
      --border:rgba(255,255,255,.12);
      --brand:#7c5cff;
      --ok:#22c55e;
      --warn:#f59e0b;
      --shadow:0 14px 40px rgba(0,0,0,.40);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(124,92,255,.22), transparent 60%),
        radial-gradient(900px 500px at 90% 20%, rgba(34,197,94,.16), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    a{color:inherit}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    header{
      position:sticky;top:12px;z-index:10;
      border:1px solid var(--border);
      border-radius:var(--r);
      background:rgba(18,26,51,.75);
      backdrop-filter: blur(10px);
      box-shadow:var(--shadow);
    }
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:14px 16px;flex-wrap:wrap}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{
      width:40px;height:40px;border-radius:14px;
      background: conic-gradient(from 220deg, var(--brand), var(--ok), #38bdf8, var(--brand));
      box-shadow: 0 10px 30px rgba(124,92,255,.22);
      flex:0 0 auto;
    }
    .brand h1{margin:0;font-size:15px;letter-spacing:.2px}
    .brand p{margin:2px 0 0;color:var(--muted);font-size:12px}
    nav{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .btn{
      border:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      color:var(--text);padding:10px 12px;border-radius:14px;
      cursor:pointer;display:inline-flex;gap:8px;align-items:center;font-weight:650;
      transition:.15s transform,.15s border-color;
      user-select:none;text-decoration:none;
    }
    .btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.20)}
    .btn.primary{
      background:linear-gradient(180deg, rgba(124,92,255,.9), rgba(124,92,255,.65));
      border-color:rgba(124,92,255,.55);
    }
    .btn.ok{
      background:linear-gradient(180deg, rgba(34,197,94,.95), rgba(34,197,94,.65));
      border-color:rgba(34,197,94,.55);
      color:#06210f;
    }

    main{margin-top:18px}
    .grid{display:grid;grid-template-columns: 1.2fr .8fr;gap:16px}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} header{position:relative;top:0} }

    .card{
      border:1px solid var(--border);
      background:var(--card);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hd{padding:16px 16px 10px;border-bottom:1px solid var(--border);background:var(--card2)}
    .hd h2{margin:0;font-size:18px;font-weight:850}
    .hd p{margin:8px 0 0;color:var(--muted);font-size:13px}
    .bd{padding:16px}

    .pill{
      font-size:12px;color:var(--muted);
      border:1px solid var(--border);border-radius:999px;padding:6px 10px;
      background:rgba(255,255,255,.04);
      display:inline-flex;gap:6px;align-items:center;white-space:nowrap;
    }

    .notice{
      padding:12px 12px;border-radius:16px;border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.03);
      color:var(--muted);font-size:13px;
    }
    .notice b{color:var(--text)}
    .divider{height:1px;background:var(--border);margin:14px 0}

    .list{display:grid;grid-template-columns:repeat(2, 1fr);gap:12px;margin-top:12px}
    @media (max-width: 560px){.list{grid-template-columns:1fr}}
    .item{
      padding:14px;border:1px solid var(--border);border-radius:16px;background:rgba(255,255,255,.03);
      display:flex;flex-direction:column;gap:10px;
    }
    .item .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .item h3{margin:0;font-size:15px}
    .price{font-weight:900}
    .muted{color:var(--muted)}
    .small{font-size:12px;color:var(--muted)}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width: 560px){.two{grid-template-columns:1fr}}

    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input, select, textarea{
      width:100%;
      padding:11px 12px;border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--text);
      outline:none;
    }
    input:focus, select:focus, textarea:focus{
      border-color:rgba(124,92,255,.55);
      box-shadow: 0 0 0 3px rgba(124,92,255,.14);
    }
    textarea{min-height:90px;resize:vertical}

    .summary{
      display:grid;gap:8px;
      padding:12px;border-radius:16px;border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.03);
    }
    .summary .line{display:flex;justify-content:space-between;gap:10px}
    .summary .line b{font-weight:850}
    .toast{
      display:none;margin-top:10px;padding:10px 12px;border:1px solid var(--border);
      border-radius:14px;color:var(--muted);background:rgba(255,255,255,.04)
    }
    .toast.show{display:block}
    footer{margin:18px 0 6px;color:var(--muted);text-align:center;font-size:12px}
    .qr{
      width:100%;
      max-width:260px;
      aspect-ratio: 1/1;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.03);
      display:grid;place-items:center;
      overflow:hidden;
    }
    .qr img{width:100%;height:100%;object-fit:cover}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>Game Recharge</h1>
            <p>PUBG UC ‚Ä¢ Roblox Robux ‚Ä¢ –±—É—Å–∞–¥ —Ç–æ–≥–ª–æ–æ–º</p>
          </div>
        
    </header>

    <main class="grid">
      <!-- LEFT -->
      <section class="card" aria-labelledby="hero">
        <div class="hd">
          <h2 id="hero">Recharge ‚Äî —Ö—É—Ä–¥–∞–Ω, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π</h2>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <span class="pill">‚è±Ô∏è –î—É–Ω–¥–∞–∂ —Ö—É–≥–∞—Ü–∞–∞: 5‚Äì30 –º–∏–Ω—É—Ç</span>
            <span class="pill">üïò –ê–∂–ª—ã–Ω —Ü–∞–≥: 10:00‚Äì00:00</span>
          </div>
        </div>

        <div class="bd">
          <div class="notice">
            <b>–ê–Ω—Ö–∞–∞—Ä—É—É–ª–≥–∞:</b> ID/Username-—ç—ç –∑”©–≤ –æ—Ä—É—É–ª–Ω–∞ —É—É. –ë—É—Ä—É—É –º—ç–¥—ç—ç–ª–ª—ç—ç—Å “Ø“Ø–¥—Å—ç–Ω –∞—Å—É—É–¥–∞–ª–¥ —Ö–∞—Ä–∏—É—Ü–ª–∞–≥–∞ —Ö“Ø–ª—ç—ç—Ö –±–æ–ª–æ–º–∂–≥“Ø–π.
          </div>

          <div class="divider"></div>

          <!-- Game filter -->
          <div class="two">
            <div>
              <label for="catalogGame">–¢–æ–≥–ª–æ–æ–º —Å–æ–Ω–≥–æ—Ö (“Ø–Ω—ç —Ö–∞—Ä–∞—Ö)</label>
              <select id="catalogGame"></select>
            </div>
            <div class="notice" style="margin:0">
              <b>–ó”©–≤—Ö”©–Ω —Å–æ–Ω–≥–æ—Å–æ–Ω —Ç–æ–≥–ª–æ–æ–º—ã–Ω</b> –±–∞–≥—Ü—É—É–¥ –¥–æ–æ—Ä —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞.
            </div>
          </div>

          <div class="divider"></div>

          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap">
            <h3 style="margin:0">–ë–∞–≥—Ü—É—É–¥ / “Æ–Ω—ç</h3>
          </div>

          <div class="list" id="productList"></div>

          <div class="divider"></div>

          <!-- ‚úÖ –•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö (NAV —Ö–æ–ª–±–æ–æ—Ç–æ–π) -->
          <div class="notice" id="contact">
            <b>–•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö:</b><br/>
            Facebook: Kimura recharge
          
          </div>
        </div>
      </section>

      <!-- RIGHT -->
      <section class="card" id="order" aria-labelledby="orderTitle">
        <div class="hd">
          <h2 id="orderTitle">–ó–∞—Ö–∏–∞–ª–≥–∞ ”©–≥”©—Ö</h2>
          <p>–ú—ç–¥—ç—ç–ª–ª—ç—ç –±”©–≥–ª”©”©–¥ —Ç”©–ª–±”©—Ä–∏–π–Ω –∞—Ä–≥–∞–∞ —Å–æ–Ω–≥–æ–Ω–æ —É—É.</p>
        </div>

        <div class="bd">
          <form id="orderForm">
            <div class="two">
              <div>
                <label for="game">–¢–æ–≥–ª–æ–æ–º</label>
                <select id="game" required></select>
              </div>
              <div>
                <label for="pack">–ë–∞–≥—Ü</label>
                <select id="pack" required></select>
              </div>
            </div>

            <div class="two" style="margin-top:12px">
              <div>
                <label for="accountId">ID / Username</label>
                <input id="accountId" required placeholder="–ñ: PUBG Player ID / Roblox username" autocomplete="off" />
              </div>
              <div>
                <label for="phone">–£—Ç–∞—Å</label>
                <input id="phone" required placeholder="99xxxxxx" inputmode="tel" type="tel" />
              </div>
            </div>

            <div class="two" style="margin-top:12px">
              <div>
                <label for="email">–ò–º—ç–π–ª </label>
                <input id="email" type="email" placeholder="name@gmail.com"  />
              </div>
              <div>
                <label for="payment">–¢”©–ª–±”©—Ä–∏–π–Ω –∞—Ä–≥–∞</label>
                <select id="payment" required>
                  <option value="qpay">QPay</option>
                  <option value="bank">–ë–∞–Ω–∫ —à–∏–ª–∂“Ø“Ø–ª—ç–≥</option>
                </select>
              </div>
            </div>

            <div style="margin-top:12px">
              <label for="note">–¢—ç–º–¥—ç–≥–ª—ç–ª </label>
              <textarea id="note" placeholder="–ù—ç–º—ç–ª—Ç —Ö“Ø—Å—ç–ª—Ç / —Ü–∞–≥–∏–π–Ω —Ç–æ—Ö–∏—Ä–æ–æ –≥—ç—Ö –º—ç—Ç"></textarea>
            </div>

            <div class="divider"></div>

            <div class="summary" aria-label="–ó–∞—Ö–∏–∞–ª–≥—ã–Ω –Ω—ç–≥—Ç–≥—ç–ª">
              <div class="line"><span class="muted">–°–æ–Ω–≥–æ—Å–æ–Ω:</span> <b id="sumPack">‚Äî</b></div>
              <div class="line"><span class="muted">“Æ–Ω—ç:</span> <b id="sumPrice">‚Äî</b></div>
              <div class="line"><span class="muted">–¢”©–ª–±”©—Ä–∏–π–Ω –∞—Ä–≥–∞:</span> <b id="sumPay">‚Äî</b></div>
            </div>

            <div class="divider"></div>

            <div class="notice" id="payBox"></div>

            <button class="btn ok" type="submit" style="margin-top:12px;width:100%;justify-content:center">
              ‚úÖ –ó–∞—Ö–∏–∞–ª–≥–∞ –∏–ª–≥—ç—ç—Ö
            </button>

            <div class="toast" id="toast" role="status" aria-live="polite"></div>

            

            <!-- ‚úÖ NEW: –ó–∞—Ö–∏–∞–ª–≥—ã–Ω —Ç”©–ª”©–≤ —à–∞–ª–≥–∞—Ö -->
            <div class="divider"></div>
            <div class="notice">
              <b>–ó–∞—Ö–∏–∞–ª–≥—ã–Ω —Ç”©–ª”©–≤ —à–∞–ª–≥–∞—Ö</b>
              <div class="two" style="margin-top:10px">
                <div>
                  <label for="trackId">–ó–∞—Ö–∏–∞–ª–≥—ã–Ω –¥—É–≥–∞–∞—Ä</label>
                  <input id="trackId" placeholder="–ñ: A1B2C3" autocomplete="off" />
                </div>
                <div style="align-self:end">
                  <button class="btn primary" type="button" id="trackBtn" style="width:100%;justify-content:center">
                    üîé –®–∞–ª–≥–∞—Ö
                  </button>
                </div>
              </div>

              <div style="margin-top:10px">
                <div class="small muted">–û–¥–æ–æ–≥–∏–π–Ω —Ç”©–ª”©–≤:</div>
                <div style="font-weight:900" id="trackStatus">‚Äî</div>
              </div>
              
            </div>
          </form>
        </div>
      </section>
    </main>

    <footer>¬© <span id="year"></span> Game Recharge. All rights reserved.</footer>
  </div>

  <script>
    const PRODUCTS = [
      { game:"PUBG Mobile", sku:"UC-60",   name:"60 UC",   price: 4000 },
      { game:"PUBG Mobile", sku:"UC-120",  name:"120 UC",  price: 8200 },
      { game:"PUBG Mobile", sku:"UC-180",  name:"180 UC",  price: 12000 },
      { game:"PUBG Mobile", sku:"UC-325", name:"325 UC", price: 17200 },
      { game:"PUBG Mobile", sku:"UC-385",   name:"385 UC",   price: 21000 },
      { game:"PUBG Mobile", sku:"UC-660",  name:"660 UC",  price: 33500 },
      { game:"PUBG Mobile", sku:"UC-720",  name:"720 UC",  price: 37000 },
      { game:"PUBG Mobile", sku:"UC-985", name:"985 UC", price: 49000 },
      { game:"PUBG Mobile", sku:"UC-1320",   name:"1320 UC",   price: 66500 },
      { game:"PUBG Mobile", sku:"UC-1800",  name:"1800 UC",  price: 80000},
      


      { game:"Roblox", sku:"RBX-400",  name:"400 Robux",  price: 17000 },
      { game:"Roblox", sku:"RBX-800",  name:"800 Robux",  price: 32000 },
      { game:"Roblox", sku:"RBX-1700", name:"1700 Robux", price: 65000 },

      { game:"Free Fire", sku:"FF-530", name:"530 Diamonds", price: 16000 },
      { game:"Mobile Legends", sku:"ML-257", name:"257 Diamonds", price: 14000 }
    ];

    const PAYMENT_INFO = {
      qpay: {
        title: "QPay —Ç”©–ª–±”©—Ä",
        qrImageUrl: "https://image2url.com/r2/default/images/1768407754554-267dd986-df67-4017-9fa2-afdbadbcfd3c.png"
      },
      bank: {
        title: "–ë–∞–Ω–∫ —à–∏–ª–∂“Ø“Ø–ª—ç–≥",
        text: "–¢”©—Ä–∏–π–Ω –±–∞–Ω–∫ 106701881125\n–ù—ç—Ä:–¢—ç–Ω–≥–∏—Å \n–ì“Ø–π–ª–≥—ç—ç–Ω–∏–π —É—Ç–≥–∞: –¢–æ–≥–ª–æ–æ–º + ID"
      }
    };

    const $ = (id) => document.getElementById(id);
    const fmt = (n) => new Intl.NumberFormat("mn-MN").format(n);
    const esc = (s) => String(s).replace(/[&<>"']/g, c=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[c]));

    function uniqueGames(){
      return [...new Set(PRODUCTS.map(p=>p.game))].sort();
    }

    function rebuildOrderGames(){
      const games = uniqueGames();
      $("game").innerHTML = "";
      games.forEach(g=>{
        const opt = document.createElement("option");
        opt.value = g; opt.textContent = g;
        $("game").appendChild(opt);
      });
    }

    function rebuildCatalogGames(){
      const games = uniqueGames();
      $("catalogGame").innerHTML = "";
      games.forEach(g=>{
        const opt = document.createElement("option");
        opt.value = g; opt.textContent = g;
        $("catalogGame").appendChild(opt);
      });
    }

    function rebuildPackOptions(){
      const game = $("game").value;
      const packs = PRODUCTS.filter(p=>p.game===game).sort((a,b)=>a.price-b.price);
      $("pack").innerHTML = "";
      packs.forEach(p=>{
        const opt = document.createElement("option");
        opt.value = p.sku;
        opt.textContent = `${p.name} ‚Äî ${fmt(p.price)}‚ÇÆ`;
        opt.dataset.name = p.name;
        opt.dataset.price = String(p.price);
        $("pack").appendChild(opt);
      });
      updateSummaryAndPay();
    }

    function renderCatalogList(){
      const selected = $("catalogGame").value;
      const packs = PRODUCTS.filter(p=>p.game===selected).sort((a,b)=>a.price-b.price);

      const container = $("productList");
      container.innerHTML = "";
      packs.forEach(p=>{
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div class="row">
            <h3>${esc(p.game)}</h3>
            <span class="pill">${esc(p.sku)}</span>
          </div>
          <div class="row">
            <div>
              <div style="font-weight:800">${esc(p.name)}</div>
            </div>
            <div class="price">${fmt(p.price)}‚ÇÆ</div>
          </div>
          <button class="btn primary" type="button">–°–æ–Ω–≥–æ—Ö</button>
        `;
        div.querySelector("button").addEventListener("click", ()=>{
          $("game").value = p.game;
          rebuildPackOptions();
          $("pack").value = p.sku;
          updateSummaryAndPay();
          document.getElementById("order").scrollIntoView({behavior:"smooth", block:"start"});
        });
        container.appendChild(div);
      });
    }

    function updateSummaryAndPay(){
      const packOpt = $("pack").selectedOptions[0];
      const packName = packOpt?.dataset?.name || "‚Äî";
      const price = Number(packOpt?.dataset?.price || 0);
      const pay = $("payment").value;

      $("sumPack").textContent = `${$("game").value} ‚Ä¢ ${packName}`;
      $("sumPrice").textContent = price ? `${fmt(price)}‚ÇÆ` : "‚Äî";
      $("sumPay").textContent = pay;

      const info = PAYMENT_INFO[pay];
      if(!info){
        $("payBox").textContent = "–¢”©–ª–±”©—Ä–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª –æ–ª–¥—Å–æ–Ω–≥“Ø–π.";
        return;
      }

      if(pay === "qpay"){
        const qr = info.qrImageUrl;
        $("payBox").innerHTML = `
          <b>${esc(info.title)}:</b><br/>
          <div style="margin-top:12px;display:grid;gap:10px">
            <div class="qr">
              ${qr ? `<img alt="QPay QR" src="${esc(qr)}" />` : `<div class="small muted">QR –∑—É—Ä–∞–≥–Ω—ã URL —Ö–æ–æ—Å–æ–Ω –±–∞–π–Ω–∞</div>`}
            </div>
            <div class="small muted">–¢”©–ª–±”©—Ä —Ö–∏–π—Å–Ω–∏–π –¥–∞—Ä–∞–∞ –≥“Ø–π–ª–≥—ç—ç–Ω–∏–π –∑—É—Ä–∞–≥/ID-–≥–∞–∞ –±–∏–¥—ç–Ω–¥ –∏–ª–≥—ç—ç–Ω—ç “Ø“Ø.</div>
          </div>
        `;
      } else {
        $("payBox").innerHTML = `
          <b>${esc(info.title)}:</b><br/>
          <pre style="white-space:pre-wrap;margin:10px 0 0;color:var(--muted);font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;">${esc(info.text || "")}</pre>
        `;
      }
    }

    function toast(msg){
      const t = $("toast");
      t.textContent = msg;
      t.classList.add("show");
      setTimeout(()=>t.classList.remove("show"), 3800);
    }

    // ‚úÖ status polling (server.js –¥—ç—ç—Ä /api/orders/:id –±–∞–π—Ö —ë—Å—Ç–æ–π)
    let trackTimer = null;
    async function refreshStatus(orderId){
      const r = await fetch(`/api/orders/${encodeURIComponent(orderId)}`);
      const data = await r.json();
      if(!r.ok) throw new Error(data?.error || "–ó–∞—Ö–∏–∞–ª–≥–∞ –æ–ª–¥—Å–æ–Ω–≥“Ø–π");
      $("trackStatus").textContent = data.status || "‚Äî";
    }
    function startAutoRefresh(orderId){
      if(trackTimer) clearInterval(trackTimer);
      trackTimer = setInterval(()=>refreshStatus(orderId).catch(()=>{}), 4000);
    }

    document.addEventListener("DOMContentLoaded", ()=>{
      $("year").textContent = new Date().getFullYear();

      rebuildOrderGames();
      rebuildCatalogGames();

      $("game").value = "PUBG Mobile";
      $("catalogGame").value = "PUBG Mobile";

      rebuildPackOptions();
      renderCatalogList();
      updateSummaryAndPay();

      $("catalogGame").addEventListener("change", renderCatalogList);

      $("game").addEventListener("change", ()=>{
        rebuildPackOptions();
        $("catalogGame").value = $("game").value;
        renderCatalogList();
      });

      $("pack").addEventListener("change", updateSummaryAndPay);
      $("payment").addEventListener("change", updateSummaryAndPay);

      $("trackBtn").addEventListener("click", async ()=>{
        const id = $("trackId").value.trim().toUpperCase();
        if(!id) return toast("‚ùó –ó–∞—Ö–∏–∞–ª–≥—ã–Ω –¥—É–≥–∞–∞—Ä–∞–∞ –æ—Ä—É—É–ª–Ω–∞ —É—É.");
        try{
          await refreshStatus(id);
          startAutoRefresh(id);
          toast("‚úÖ –¢”©–ª”©–≤ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —à–∏–Ω—ç—á–ª—ç–≥–¥—ç–Ω—ç.");
        }catch(e){
          toast("‚ùó " + e.message);
        }
      });

      $("orderForm").addEventListener("submit", async (e)=>{
        e.preventDefault();

        const packOpt = $("pack").selectedOptions[0];
        const payload = {
          game: $("game").value,
          packSku: $("pack").value,
          packName: packOpt?.dataset?.name || "",
          price: Number(packOpt?.dataset?.price || 0),
          accountId: $("accountId").value.trim(),
          phone: $("phone").value.trim(),
          email: $("email").value.trim(),
          payment: $("payment").value,
          note: $("note").value.trim()
        };

        if(!payload.accountId || !payload.phone){
          toast("‚ùó ID/—É—Ç—Å–∞–∞ –±“Ø—Ä—ç–Ω –±”©–≥–ª”©–Ω”© “Ø“Ø.");
          return;
        }

        try{
          const r = await fetch("/api/orders", {
            method:"POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify(payload)
          });
          const data = await r.json();
          if(!r.ok) throw new Error(data?.error || "–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞");

          toast(`‚úÖ –ó–∞—Ö–∏–∞–ª–≥–∞ –∞–º–∂–∏–ª—Ç—Ç–∞–π. –î—É–≥–∞–∞—Ä: ${data.orderId}`);

          // –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ç”©–ª”©–≤ —à–∞–ª–≥–∞—Ö —Ç–∞–ª–±–∞—Ä —Ä—É—É –æ—Ä—É—É–ª–∞—Ö
          $("trackId").value = data.orderId;
          await refreshStatus(data.orderId);
          startAutoRefresh(data.orderId);

          $("note").value = "";
        }catch(err){
          toast("‚ùó " + err.message);
        }
      });
    });
  </script>
</body>
</html><!doctype html>
<html lang="mn">
